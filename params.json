{"name":"Koa-track","tagline":"","body":"[![npm version][npm-image]][npm-url]\r\n[![Build Status](https://travis-ci.org/ajuste/koa-track.svg?branch=master)](https://travis-ci.org/ajuste/koa-track)\r\n[![codecov.io](http://codecov.io/github/ajuste/koa-track/coverage.svg?branch=master)](http://codecov.io/github/ajuste/koa-track?branch=master)\r\n\r\n\r\n# koa-track\r\n\r\n## Install\r\n\r\n```sh\r\n\r\nnpm install koa-track\r\n\r\n```\r\n\r\n## What can we do for you?\r\n\r\nAre you having a hard time keeping track of what happened with a erroring flow?\r\n\r\nThen this module if perfect for you. Generate a unique id that identifies a request and spread it along with subsequent requests to different services you might be using.\r\n\r\nThis way you can identify a flow and see what went wrong.\r\n\r\n### Usage\r\n\r\nUse requestId middleware wherever you need to generate an id for an incoming request:\r\n\r\n```js\r\n\r\nvar koa       = require(\"koa\");\r\nvar koaTrack  = require(\"koa-track\");\r\nvar koaApp    = koa();\r\nvar requestId = koaTrack.requestId.middleware;\r\n\r\nkoaApp.use(koaTrack.requestId.middleware());\r\n\r\n```\r\n\r\nIf you need to spread your tracking information to other servers you can do it with spread utility:\r\n\r\n\r\n```js\r\n\r\nvar http     = require(\"http\");\r\nvar koaTrack = require(\"koa-track\");\r\nvar spread   = koaTrack.spread.spread({ requestId: { write: true } });\r\nvar self     = this;\r\n\r\n// set up your http request options as usual\r\nvar requestOptions = {\r\n  hostname: \"127.0.0.1\",\r\n  port: 3000,\r\n  path: \"/user\",\r\n  method: \"GET\"\r\n};\r\n// let spread function override options to embed current request id\r\nrequestOptions = spread(self, {options: requestOptions, type: \"http-request\" });\r\n\r\n// execute request as usual\r\nvar req = http.request(requestOptions, function(res) {\r\n  // on res callback\r\n});\r\n\r\n```\r\n\r\n\r\nHow do I achieve a koa application reuse tracking information from a request? \r\n\r\n\r\n```js\r\n\r\nvar koaTrack   = require(\"koa-track\");\r\nvar middleware = koaTrack.spread.middleware({ requestId: { read: true } });\r\n\r\nkoaApp.use(middleware());\r\n\r\n```\r\n\r\n\r\n### Options\r\n\r\nOverriding default options for requestId middleware.\r\n\r\n```js\r\n\r\nkoaTrack.requestId.middleware({\r\n  headerName : \"x-rid\"  // [String] - optional: Specify header name for request-id\r\n})\r\n\r\n```\r\n\r\n## License\r\n\r\n  MIT\r\n\r\n[npm-image]: https://img.shields.io/npm/v/koa-track.svg?style=flat-square\r\n[npm-url]: https://www.npmjs.com/package/koa-track\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}